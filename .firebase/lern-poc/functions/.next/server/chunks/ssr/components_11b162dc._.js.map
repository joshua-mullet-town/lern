{"version":3,"sources":["turbopack:///[project]/components/learner/LearnerProfileHeader.tsx","turbopack:///[project]/node_modules/@radix-ui/react-checkbox/dist/index.mjs","turbopack:///[project]/components/ui/checkbox.tsx","turbopack:///[project]/components/rating/AddCompetencyRating.tsx","turbopack:///[project]/components/rating/RequestRatingModal.tsx"],"sourcesContent":["'use client';\n\nimport { User } from '@/types';\nimport { UserCircle } from 'lucide-react';\n\ninterface LearnerProfileHeaderProps {\n  learner: User;\n}\n\nexport function LearnerProfileHeader({ learner }: LearnerProfileHeaderProps) {\n  return (\n    <div className=\"bg-white rounded-lg border border-slate-200 p-6 mb-6\">\n      <div className=\"flex items-center gap-4\">\n        <div className=\"w-16 h-16 rounded-full bg-slate-200 flex items-center justify-center\">\n          <UserCircle className=\"w-12 h-12 text-slate-400\" />\n        </div>\n        <div>\n          <h1 className=\"text-2xl font-bold\">{learner.display_name}</h1>\n          <p className=\"text-slate-600\">{learner.email}</p>\n          <p className=\"text-sm text-slate-400 mt-1\">\n            Joined {learner.created_at.toLocaleDateString()}\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n}\n","\"use client\";\n\n// src/checkbox.tsx\nimport * as React from \"react\";\nimport { useComposedRefs } from \"@radix-ui/react-compose-refs\";\nimport { createContextScope } from \"@radix-ui/react-context\";\nimport { composeEventHandlers } from \"@radix-ui/primitive\";\nimport { useControllableState } from \"@radix-ui/react-use-controllable-state\";\nimport { usePrevious } from \"@radix-ui/react-use-previous\";\nimport { useSize } from \"@radix-ui/react-use-size\";\nimport { Presence } from \"@radix-ui/react-presence\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { Fragment, jsx, jsxs } from \"react/jsx-runtime\";\nvar CHECKBOX_NAME = \"Checkbox\";\nvar [createCheckboxContext, createCheckboxScope] = createContextScope(CHECKBOX_NAME);\nvar [CheckboxProviderImpl, useCheckboxContext] = createCheckboxContext(CHECKBOX_NAME);\nfunction CheckboxProvider(props) {\n  const {\n    __scopeCheckbox,\n    checked: checkedProp,\n    children,\n    defaultChecked,\n    disabled,\n    form,\n    name,\n    onCheckedChange,\n    required,\n    value = \"on\",\n    // @ts-expect-error\n    internal_do_not_use_render\n  } = props;\n  const [checked, setChecked] = useControllableState({\n    prop: checkedProp,\n    defaultProp: defaultChecked ?? false,\n    onChange: onCheckedChange,\n    caller: CHECKBOX_NAME\n  });\n  const [control, setControl] = React.useState(null);\n  const [bubbleInput, setBubbleInput] = React.useState(null);\n  const hasConsumerStoppedPropagationRef = React.useRef(false);\n  const isFormControl = control ? !!form || !!control.closest(\"form\") : (\n    // We set this to true by default so that events bubble to forms without JS (SSR)\n    true\n  );\n  const context = {\n    checked,\n    disabled,\n    setChecked,\n    control,\n    setControl,\n    name,\n    form,\n    value,\n    hasConsumerStoppedPropagationRef,\n    required,\n    defaultChecked: isIndeterminate(defaultChecked) ? false : defaultChecked,\n    isFormControl,\n    bubbleInput,\n    setBubbleInput\n  };\n  return /* @__PURE__ */ jsx(\n    CheckboxProviderImpl,\n    {\n      scope: __scopeCheckbox,\n      ...context,\n      children: isFunction(internal_do_not_use_render) ? internal_do_not_use_render(context) : children\n    }\n  );\n}\nvar TRIGGER_NAME = \"CheckboxTrigger\";\nvar CheckboxTrigger = React.forwardRef(\n  ({ __scopeCheckbox, onKeyDown, onClick, ...checkboxProps }, forwardedRef) => {\n    const {\n      control,\n      value,\n      disabled,\n      checked,\n      required,\n      setControl,\n      setChecked,\n      hasConsumerStoppedPropagationRef,\n      isFormControl,\n      bubbleInput\n    } = useCheckboxContext(TRIGGER_NAME, __scopeCheckbox);\n    const composedRefs = useComposedRefs(forwardedRef, setControl);\n    const initialCheckedStateRef = React.useRef(checked);\n    React.useEffect(() => {\n      const form = control?.form;\n      if (form) {\n        const reset = () => setChecked(initialCheckedStateRef.current);\n        form.addEventListener(\"reset\", reset);\n        return () => form.removeEventListener(\"reset\", reset);\n      }\n    }, [control, setChecked]);\n    return /* @__PURE__ */ jsx(\n      Primitive.button,\n      {\n        type: \"button\",\n        role: \"checkbox\",\n        \"aria-checked\": isIndeterminate(checked) ? \"mixed\" : checked,\n        \"aria-required\": required,\n        \"data-state\": getState(checked),\n        \"data-disabled\": disabled ? \"\" : void 0,\n        disabled,\n        value,\n        ...checkboxProps,\n        ref: composedRefs,\n        onKeyDown: composeEventHandlers(onKeyDown, (event) => {\n          if (event.key === \"Enter\") event.preventDefault();\n        }),\n        onClick: composeEventHandlers(onClick, (event) => {\n          setChecked((prevChecked) => isIndeterminate(prevChecked) ? true : !prevChecked);\n          if (bubbleInput && isFormControl) {\n            hasConsumerStoppedPropagationRef.current = event.isPropagationStopped();\n            if (!hasConsumerStoppedPropagationRef.current) event.stopPropagation();\n          }\n        })\n      }\n    );\n  }\n);\nCheckboxTrigger.displayName = TRIGGER_NAME;\nvar Checkbox = React.forwardRef(\n  (props, forwardedRef) => {\n    const {\n      __scopeCheckbox,\n      name,\n      checked,\n      defaultChecked,\n      required,\n      disabled,\n      value,\n      onCheckedChange,\n      form,\n      ...checkboxProps\n    } = props;\n    return /* @__PURE__ */ jsx(\n      CheckboxProvider,\n      {\n        __scopeCheckbox,\n        checked,\n        defaultChecked,\n        disabled,\n        required,\n        onCheckedChange,\n        name,\n        form,\n        value,\n        internal_do_not_use_render: ({ isFormControl }) => /* @__PURE__ */ jsxs(Fragment, { children: [\n          /* @__PURE__ */ jsx(\n            CheckboxTrigger,\n            {\n              ...checkboxProps,\n              ref: forwardedRef,\n              __scopeCheckbox\n            }\n          ),\n          isFormControl && /* @__PURE__ */ jsx(\n            CheckboxBubbleInput,\n            {\n              __scopeCheckbox\n            }\n          )\n        ] })\n      }\n    );\n  }\n);\nCheckbox.displayName = CHECKBOX_NAME;\nvar INDICATOR_NAME = \"CheckboxIndicator\";\nvar CheckboxIndicator = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeCheckbox, forceMount, ...indicatorProps } = props;\n    const context = useCheckboxContext(INDICATOR_NAME, __scopeCheckbox);\n    return /* @__PURE__ */ jsx(\n      Presence,\n      {\n        present: forceMount || isIndeterminate(context.checked) || context.checked === true,\n        children: /* @__PURE__ */ jsx(\n          Primitive.span,\n          {\n            \"data-state\": getState(context.checked),\n            \"data-disabled\": context.disabled ? \"\" : void 0,\n            ...indicatorProps,\n            ref: forwardedRef,\n            style: { pointerEvents: \"none\", ...props.style }\n          }\n        )\n      }\n    );\n  }\n);\nCheckboxIndicator.displayName = INDICATOR_NAME;\nvar BUBBLE_INPUT_NAME = \"CheckboxBubbleInput\";\nvar CheckboxBubbleInput = React.forwardRef(\n  ({ __scopeCheckbox, ...props }, forwardedRef) => {\n    const {\n      control,\n      hasConsumerStoppedPropagationRef,\n      checked,\n      defaultChecked,\n      required,\n      disabled,\n      name,\n      value,\n      form,\n      bubbleInput,\n      setBubbleInput\n    } = useCheckboxContext(BUBBLE_INPUT_NAME, __scopeCheckbox);\n    const composedRefs = useComposedRefs(forwardedRef, setBubbleInput);\n    const prevChecked = usePrevious(checked);\n    const controlSize = useSize(control);\n    React.useEffect(() => {\n      const input = bubbleInput;\n      if (!input) return;\n      const inputProto = window.HTMLInputElement.prototype;\n      const descriptor = Object.getOwnPropertyDescriptor(\n        inputProto,\n        \"checked\"\n      );\n      const setChecked = descriptor.set;\n      const bubbles = !hasConsumerStoppedPropagationRef.current;\n      if (prevChecked !== checked && setChecked) {\n        const event = new Event(\"click\", { bubbles });\n        input.indeterminate = isIndeterminate(checked);\n        setChecked.call(input, isIndeterminate(checked) ? false : checked);\n        input.dispatchEvent(event);\n      }\n    }, [bubbleInput, prevChecked, checked, hasConsumerStoppedPropagationRef]);\n    const defaultCheckedRef = React.useRef(isIndeterminate(checked) ? false : checked);\n    return /* @__PURE__ */ jsx(\n      Primitive.input,\n      {\n        type: \"checkbox\",\n        \"aria-hidden\": true,\n        defaultChecked: defaultChecked ?? defaultCheckedRef.current,\n        required,\n        disabled,\n        name,\n        value,\n        form,\n        ...props,\n        tabIndex: -1,\n        ref: composedRefs,\n        style: {\n          ...props.style,\n          ...controlSize,\n          position: \"absolute\",\n          pointerEvents: \"none\",\n          opacity: 0,\n          margin: 0,\n          // We transform because the input is absolutely positioned but we have\n          // rendered it **after** the button. This pulls it back to sit on top\n          // of the button.\n          transform: \"translateX(-100%)\"\n        }\n      }\n    );\n  }\n);\nCheckboxBubbleInput.displayName = BUBBLE_INPUT_NAME;\nfunction isFunction(value) {\n  return typeof value === \"function\";\n}\nfunction isIndeterminate(checked) {\n  return checked === \"indeterminate\";\n}\nfunction getState(checked) {\n  return isIndeterminate(checked) ? \"indeterminate\" : checked ? \"checked\" : \"unchecked\";\n}\nexport {\n  Checkbox,\n  CheckboxIndicator,\n  CheckboxIndicator as Indicator,\n  Checkbox as Root,\n  createCheckboxScope,\n  CheckboxBubbleInput as unstable_BubbleInput,\n  CheckboxBubbleInput as unstable_CheckboxBubbleInput,\n  CheckboxProvider as unstable_CheckboxProvider,\n  CheckboxTrigger as unstable_CheckboxTrigger,\n  CheckboxProvider as unstable_Provider,\n  CheckboxTrigger as unstable_Trigger\n};\n//# sourceMappingURL=index.mjs.map\n","\"use client\"\n\nimport * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { CheckIcon } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Checkbox({\n  className,\n  ...props\n}: React.ComponentProps<typeof CheckboxPrimitive.Root>) {\n  return (\n    <CheckboxPrimitive.Root\n      data-slot=\"checkbox\"\n      className={cn(\n        \"peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <CheckboxPrimitive.Indicator\n        data-slot=\"checkbox-indicator\"\n        className=\"grid place-content-center text-current transition-none\"\n      >\n        <CheckIcon className=\"size-3.5\" />\n      </CheckboxPrimitive.Indicator>\n    </CheckboxPrimitive.Root>\n  )\n}\n\nexport { Checkbox }\n","'use client';\n\nimport { useState, useEffect } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { collection, addDoc, Timestamp, getDocs, query, where } from 'firebase/firestore';\nimport { db } from '@/lib/firebase-client';\nimport { COLLECTION_NAMES, Competency, RatingScore, User } from '@/types';\nimport { CompetencyConverter, UserConverter } from '@/lib/converters';\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from '@/components/ui/dialog';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select';\nimport { Button } from '@/components/ui/button';\nimport { Label } from '@/components/ui/label';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Checkbox } from '@/components/ui/checkbox';\nimport { Plus } from 'lucide-react';\nimport { toast } from 'sonner';\n\n// Hardcoded for POC\nconst EDUCATOR_ID = 'demo-educator-123';\nconst ORG_ID = 'demo-org-456';\n\ninterface AddCompetencyRatingProps {\n  learnerId: string;\n  preselectedCompetencyId?: string;\n  children?: React.ReactNode;\n}\n\nexport function AddCompetencyRating({ learnerId, preselectedCompetencyId, children }: AddCompetencyRatingProps) {\n  const router = useRouter();\n  const [open, setOpen] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [competencies, setCompetencies] = useState<Competency[]>([]);\n  const [employers, setEmployers] = useState<User[]>([]);\n  const [formData, setFormData] = useState({\n    competency_id: preselectedCompetencyId || '',\n    score: '' as '' | RatingScore,\n    comment: '',\n    request_self: false,\n    request_employer: false,\n    employer_id: '',\n  });\n\n  // Fetch competencies and employers when modal opens\n  useEffect(() => {\n    if (open) {\n      const fetchData = async () => {\n        // Fetch competencies\n        if (competencies.length === 0) {\n          const competenciesRef = collection(db, COLLECTION_NAMES.competencies).withConverter(\n            CompetencyConverter\n          );\n          const snapshot = await getDocs(competenciesRef);\n          setCompetencies(snapshot.docs.map((doc) => doc.data()));\n        }\n\n        // Fetch employers\n        if (employers.length === 0) {\n          const usersRef = collection(db, COLLECTION_NAMES.users).withConverter(UserConverter);\n          const employersQuery = query(\n            usersRef,\n            where('org_id', '==', ORG_ID),\n            where('roles', 'array-contains', 'master')\n          );\n          const employersSnap = await getDocs(employersQuery);\n          setEmployers(employersSnap.docs.map((doc) => doc.data()));\n        }\n      };\n      fetchData();\n    }\n  }, [open, competencies.length, employers.length]);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n\n    try {\n      const promises = [];\n\n      // Create the completed mentor rating\n      const mentorRating: Record<string, unknown> = {\n        learner_id: learnerId,\n        competency_id: formData.competency_id,\n        rater_id: EDUCATOR_ID,\n        rater_type: 'mentor' as const,\n        score: Number(formData.score) as RatingScore,\n        status: 'completed' as const,\n        created_at: Timestamp.now(),\n      };\n      if (formData.comment.trim()) {\n        mentorRating.comment = formData.comment;\n      }\n      promises.push(addDoc(collection(db, COLLECTION_NAMES.ratings), mentorRating));\n\n      // If requested, create pending self-assessment rating\n      if (formData.request_self) {\n        promises.push(\n          addDoc(collection(db, COLLECTION_NAMES.ratings), {\n            learner_id: learnerId,\n            competency_id: formData.competency_id,\n            rater_id: learnerId,\n            rater_type: 'self',\n            status: 'pending',\n            created_at: Timestamp.now(),\n          })\n        );\n      }\n\n      // If requested, create pending employer rating\n      if (formData.request_employer && formData.employer_id) {\n        promises.push(\n          addDoc(collection(db, COLLECTION_NAMES.ratings), {\n            learner_id: learnerId,\n            competency_id: formData.competency_id,\n            rater_id: formData.employer_id,\n            rater_type: 'master',\n            status: 'pending',\n            created_at: Timestamp.now(),\n          })\n        );\n      }\n\n      await Promise.all(promises);\n\n      // Show success toast\n      let message = 'Competency rating added';\n      if (formData.request_self && formData.request_employer) {\n        message += ' and rating requests sent to learner and employer';\n      } else if (formData.request_self) {\n        message += ' and rating request sent to learner';\n      } else if (formData.request_employer) {\n        message += ' and rating request sent to employer';\n      }\n      toast.success(message);\n\n      // Reset form and close modal\n      setFormData({\n        competency_id: preselectedCompetencyId || '',\n        score: '',\n        comment: '',\n        request_self: false,\n        request_employer: false,\n        employer_id: '',\n      });\n      setOpen(false);\n\n      // Refresh the page to show new rating\n      router.refresh();\n    } catch (error) {\n      console.error('Error adding competency rating:', error);\n      toast.error('Failed to add rating. Please try again.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={setOpen}>\n      <DialogTrigger asChild>\n        {children || (\n          <Button className=\"w-full sm:w-auto\">\n            <Plus className=\"w-4 h-4 mr-2\" />\n            Add Competency Rating\n          </Button>\n        )}\n      </DialogTrigger>\n      <DialogContent className=\"sm:max-w-[525px]\">\n        <DialogHeader>\n          <DialogTitle>Add Competency Rating</DialogTitle>\n          <DialogDescription>\n            Assign a competency to this learner with an initial mentor rating.\n          </DialogDescription>\n        </DialogHeader>\n        <form onSubmit={handleSubmit} className=\"space-y-4 mt-4\">\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"competency\">Competency</Label>\n            <Select\n              value={formData.competency_id}\n              onValueChange={(value) => setFormData({ ...formData, competency_id: value })}\n              required\n            >\n              <SelectTrigger>\n                <SelectValue placeholder=\"Select a competency\" />\n              </SelectTrigger>\n              <SelectContent>\n                {competencies.map((competency) => (\n                  <SelectItem key={competency.id} value={competency.id}>\n                    {competency.title}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"score\">Initial Rating (0-4)</Label>\n            <Select\n              value={formData.score.toString()}\n              onValueChange={(value) =>\n                setFormData({ ...formData, score: Number(value) as RatingScore })\n              }\n              required\n            >\n              <SelectTrigger>\n                <SelectValue placeholder=\"Select rating\" />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"0\">0 - No evidence</SelectItem>\n                <SelectItem value=\"1\">1 - Beginning</SelectItem>\n                <SelectItem value=\"2\">2 - Developing</SelectItem>\n                <SelectItem value=\"3\">3 - Proficient</SelectItem>\n                <SelectItem value=\"4\">4 - Expert</SelectItem>\n              </SelectContent>\n            </Select>\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"comment\">Comment (optional)</Label>\n            <Textarea\n              id=\"comment\"\n              placeholder=\"Add notes about this rating...\"\n              value={formData.comment}\n              onChange={(e) => setFormData({ ...formData, comment: e.target.value })}\n              rows={3}\n            />\n          </div>\n\n          <div className=\"space-y-3 border-t pt-4\">\n            <Label>Also Request Ratings From:</Label>\n\n            <div className=\"flex items-center space-x-2\">\n              <Checkbox\n                id=\"request_self\"\n                checked={formData.request_self}\n                onCheckedChange={(checked) =>\n                  setFormData({ ...formData, request_self: checked === true })\n                }\n              />\n              <label\n                htmlFor=\"request_self\"\n                className=\"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n              >\n                Request self-assessment from learner\n              </label>\n            </div>\n\n            <div className=\"space-y-2\">\n              <div className=\"flex items-center space-x-2\">\n                <Checkbox\n                  id=\"request_employer_add\"\n                  checked={formData.request_employer}\n                  onCheckedChange={(checked) =>\n                    setFormData({ ...formData, request_employer: checked === true })\n                  }\n                />\n                <label\n                  htmlFor=\"request_employer_add\"\n                  className=\"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n                >\n                  Request rating from employer\n                </label>\n              </div>\n\n              {formData.request_employer && (\n                <Select\n                  value={formData.employer_id}\n                  onValueChange={(value) => setFormData({ ...formData, employer_id: value })}\n                >\n                  <SelectTrigger className=\"ml-6\">\n                    <SelectValue placeholder=\"Select employer\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    {employers.length === 0 ? (\n                      <div className=\"p-2 text-sm text-slate-500\">\n                        No employers in organization\n                      </div>\n                    ) : (\n                      employers.map((employer) => (\n                        <SelectItem key={employer.id} value={employer.id}>\n                          {employer.display_name}\n                        </SelectItem>\n                      ))\n                    )}\n                  </SelectContent>\n                </Select>\n              )}\n            </div>\n          </div>\n\n          <div className=\"flex justify-end gap-3 mt-6\">\n            <Button\n              type=\"button\"\n              variant=\"outline\"\n              onClick={() => setOpen(false)}\n              disabled={loading}\n            >\n              Cancel\n            </Button>\n            <Button\n              type=\"submit\"\n              disabled={\n                loading ||\n                (formData.request_employer && !formData.employer_id)\n              }\n            >\n              {loading ? 'Adding...' : 'Add Rating'}\n            </Button>\n          </div>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","'use client';\n\nimport { useState, useEffect } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { collection, addDoc, Timestamp, getDocs, query, where } from 'firebase/firestore';\nimport { db } from '@/lib/firebase-client';\nimport { COLLECTION_NAMES, Competency, User } from '@/types';\nimport { CompetencyConverter, UserConverter } from '@/lib/converters';\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from '@/components/ui/dialog';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select';\nimport { Button } from '@/components/ui/button';\nimport { Label } from '@/components/ui/label';\nimport { Checkbox } from '@/components/ui/checkbox';\nimport { ClipboardList } from 'lucide-react';\nimport { toast } from 'sonner';\n\n// Hardcoded for POC\nconst EDUCATOR_ID = 'demo-educator-123';\nconst ORG_ID = 'demo-org-456';\n\ninterface RequestRatingModalProps {\n  learnerId: string;\n}\n\nexport function RequestRatingModal({ learnerId }: RequestRatingModalProps) {\n  const router = useRouter();\n  const [open, setOpen] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [competencies, setCompetencies] = useState<Competency[]>([]);\n  const [employers, setEmployers] = useState<User[]>([]);\n\n  const [formData, setFormData] = useState({\n    competency_id: '',\n    request_self: false,\n    request_employer: false,\n    employer_id: '',\n  });\n\n  // Fetch competencies and employers when modal opens\n  useEffect(() => {\n    if (open) {\n      const fetchData = async () => {\n        // Fetch competencies\n        const competenciesRef = collection(db, COLLECTION_NAMES.competencies).withConverter(\n          CompetencyConverter\n        );\n        const compsSnap = await getDocs(competenciesRef);\n        setCompetencies(compsSnap.docs.map((doc) => doc.data()));\n\n        // Fetch employers (users with 'master' role)\n        const usersRef = collection(db, COLLECTION_NAMES.users).withConverter(UserConverter);\n        const employersQuery = query(\n          usersRef,\n          where('org_id', '==', ORG_ID),\n          where('roles', 'array-contains', 'master')\n        );\n        const employersSnap = await getDocs(employersQuery);\n        setEmployers(employersSnap.docs.map((doc) => doc.data()));\n      };\n      fetchData();\n    }\n  }, [open]);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n\n    try {\n      // Create rating requests based on checkboxes\n      const promises = [];\n\n      if (formData.request_self) {\n        // Create pending self-assessment rating\n        promises.push(\n          addDoc(collection(db, COLLECTION_NAMES.ratings), {\n            learner_id: learnerId,\n            competency_id: formData.competency_id,\n            rater_id: learnerId, // Learner rates themselves\n            rater_type: 'self',\n            status: 'pending',\n            created_at: Timestamp.now(),\n          })\n        );\n      }\n\n      if (formData.request_employer && formData.employer_id) {\n        // Create pending employer rating\n        promises.push(\n          addDoc(collection(db, COLLECTION_NAMES.ratings), {\n            learner_id: learnerId,\n            competency_id: formData.competency_id,\n            rater_id: formData.employer_id,\n            rater_type: 'master',\n            status: 'pending',\n            created_at: Timestamp.now(),\n          })\n        );\n      }\n\n      await Promise.all(promises);\n\n      // Show success toast\n      let message = 'Rating request';\n      if (formData.request_self && formData.request_employer) {\n        message += 's sent to learner and employer';\n      } else if (formData.request_self) {\n        message += ' sent to learner';\n      } else if (formData.request_employer) {\n        message += ' sent to employer';\n      }\n      toast.success(message);\n\n      // Reset form and close modal\n      setFormData({\n        competency_id: '',\n        request_self: false,\n        request_employer: false,\n        employer_id: '',\n      });\n      setOpen(false);\n\n      // Refresh the page\n      router.refresh();\n    } catch (error) {\n      console.error('Error creating rating request:', error);\n      toast.error('Failed to create rating request. Please try again.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={setOpen}>\n      <DialogTrigger asChild>\n        <Button variant=\"outline\">\n          <ClipboardList className=\"w-4 h-4 mr-2\" />\n          Request Rating\n        </Button>\n      </DialogTrigger>\n      <DialogContent className=\"sm:max-w-[500px]\">\n        <DialogHeader>\n          <DialogTitle>Request Competency Rating</DialogTitle>\n          <DialogDescription>\n            Request a self-assessment from the learner and/or a rating from an employer.\n          </DialogDescription>\n        </DialogHeader>\n        <form onSubmit={handleSubmit} className=\"space-y-4 mt-4\">\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"competency\">Competency</Label>\n            <Select\n              value={formData.competency_id}\n              onValueChange={(value) => setFormData({ ...formData, competency_id: value })}\n              required\n            >\n              <SelectTrigger>\n                <SelectValue placeholder=\"Select a competency\" />\n              </SelectTrigger>\n              <SelectContent>\n                {competencies.map((competency) => (\n                  <SelectItem key={competency.id} value={competency.id}>\n                    {competency.title}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n\n          <div className=\"space-y-3 border-t pt-4\">\n            <Label>Request Ratings From:</Label>\n\n            <div className=\"flex items-center space-x-2\">\n              <Checkbox\n                id=\"request_self\"\n                checked={formData.request_self}\n                onCheckedChange={(checked) =>\n                  setFormData({ ...formData, request_self: checked === true })\n                }\n              />\n              <label\n                htmlFor=\"request_self\"\n                className=\"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n              >\n                Request self-assessment from learner\n              </label>\n            </div>\n\n            <div className=\"space-y-2\">\n              <div className=\"flex items-center space-x-2\">\n                <Checkbox\n                  id=\"request_employer\"\n                  checked={formData.request_employer}\n                  onCheckedChange={(checked) =>\n                    setFormData({ ...formData, request_employer: checked === true })\n                  }\n                />\n                <label\n                  htmlFor=\"request_employer\"\n                  className=\"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n                >\n                  Request rating from employer\n                </label>\n              </div>\n\n              {formData.request_employer && (\n                <Select\n                  value={formData.employer_id}\n                  onValueChange={(value) => setFormData({ ...formData, employer_id: value })}\n                  required={formData.request_employer}\n                >\n                  <SelectTrigger className=\"ml-6\">\n                    <SelectValue placeholder=\"Select employer\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    {employers.length === 0 ? (\n                      <div className=\"p-2 text-sm text-slate-500\">\n                        No employers in organization\n                      </div>\n                    ) : (\n                      employers.map((employer) => (\n                        <SelectItem key={employer.id} value={employer.id}>\n                          {employer.display_name}\n                        </SelectItem>\n                      ))\n                    )}\n                  </SelectContent>\n                </Select>\n              )}\n            </div>\n          </div>\n\n          <div className=\"flex justify-end gap-3 mt-6 pt-4 border-t\">\n            <Button type=\"button\" variant=\"outline\" onClick={() => setOpen(false)}>\n              Cancel\n            </Button>\n            <Button\n              type=\"submit\"\n              disabled={\n                loading ||\n                !formData.competency_id ||\n                (!formData.request_self && !formData.request_employer) ||\n                (formData.request_employer && !formData.employer_id)\n              }\n            >\n              {loading ? 'Creating...' : 'Create Request'}\n            </Button>\n          </div>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n"],"names":[],"mappings":"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","ignoreList":[1]}