{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 96, "column": 0}, "map": {"version":3,"sources":["file:///Users/joshuamullet/code/lern/lib/firebase-client.ts"],"sourcesContent":["// Firebase Client SDK configuration\n// Used in Client Components for auth state and real-time listeners\n\nimport { initializeApp, getApps, getApp } from 'firebase/app';\nimport { getAuth } from 'firebase/auth';\nimport { getFirestore } from 'firebase/firestore';\nimport { getStorage } from 'firebase/storage';\n\nconst firebaseConfig = {\n  apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY,\n  authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,\n  projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,\n  storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,\n  messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,\n  appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID,\n};\n\n// Initialize Firebase (singleton pattern)\nconst app = getApps().length === 0 ? initializeApp(firebaseConfig) : getApp();\n\nexport const auth = getAuth(app);\nexport const db = getFirestore(app);\nexport const storage = getStorage(app);\n"],"names":[],"mappings":"AAAA,oCAAoC;AACpC,mEAAmE;;;;;;;;;AAEnE;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;;;;;AAEA,MAAM,iBAAiB;IACrB,MAAM;IACN,UAAU;IACV,SAAS;IACT,aAAa;IACb,iBAAiB;IACjB,KAAK;AACP;AAEA,0CAA0C;AAC1C,MAAM,MAAM,IAAA,2KAAO,IAAG,MAAM,KAAK,IAAI,IAAA,iLAAa,EAAC,kBAAkB,IAAA,0KAAM;AAEpE,MAAM,OAAO,IAAA,6KAAO,EAAC;AACrB,MAAM,KAAK,IAAA,iLAAY,EAAC;AACxB,MAAM,UAAU,IAAA,kMAAU,EAAC","debugId":null}},
    {"offset": {"line": 135, "column": 0}, "map": {"version":3,"sources":["file:///Users/joshuamullet/code/lern/types/base.ts"],"sourcesContent":["/**\n * Base entity fields shared by all Firestore documents\n */\nexport interface BaseEntity {\n  id: string;\n  created_at: Date;\n  updated_at?: Date;\n}\n"],"names":[],"mappings":"AAAA;;CAEC","debugId":null}},
    {"offset": {"line": 143, "column": 0}, "map": {"version":3,"sources":["file:///Users/joshuamullet/code/lern/types/role.ts"],"sourcesContent":["/**\n * User roles in the LERN platform\n */\nexport type Role = 'learner' | 'educator' | 'industry_expert';\n"],"names":[],"mappings":"AAAA;;CAEC","debugId":null}},
    {"offset": {"line": 151, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 157, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 163, "column": 0}, "map": {"version":3,"sources":["file:///Users/joshuamullet/code/lern/types/competency.ts"],"sourcesContent":["import { BaseEntity } from './base';\n\n/**\n * Type of skill being assessed\n */\nexport type CompetencyType = 'hard' | 'soft';\n\n/**\n * Rating scale descriptions (0-4)\n */\nexport interface RubricScale {\n  0: string;  // \"No evidence\"\n  1: string;  // \"Beginning\"\n  2: string;  // \"Developing\"\n  3: string;  // \"Proficient\"\n  4: string;  // \"Expert\"\n}\n\n/**\n * A defined skill or competency that can be assessed\n * Created by educators, rated by learners/mentors/masters\n */\nexport interface Competency extends BaseEntity {\n  org_id: string;\n  created_by: string;  // userId of educator who created it\n  title: string;\n  description: string;\n  type: CompetencyType;\n  rubric?: RubricScale;  // Optional: custom rubric (uses DEFAULT_RUBRIC if not set)\n}\n\n/**\n * Default rubric for new competencies\n */\nexport const DEFAULT_RUBRIC: RubricScale = {\n  0: \"No evidence\",\n  1: \"Beginning\",\n  2: \"Developing\",\n  3: \"Proficient\",\n  4: \"Expert\",\n};\n"],"names":[],"mappings":";;;;AAkCO,MAAM,iBAA8B;IACzC,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;AACL","debugId":null}},
    {"offset": {"line": 178, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 184, "column": 0}, "map": {"version":3,"sources":["file:///Users/joshuamullet/code/lern/types/artifact.ts"],"sourcesContent":["import { BaseEntity } from './base';\n\n/**\n * Allowed artifact file types\n */\nexport type ArtifactFileType = 'pdf' | 'jpg' | 'png' | 'mp4';\n\n/**\n * Uploaded portfolio evidence (PDF, images, videos)\n * Can be linked to multiple competencies\n */\nexport interface Artifact extends BaseEntity {\n  uploaded_by: string;  // userId\n  learner_id: string;   // Owner of the artifact\n  file_url: string;     // Firebase Storage URL\n  file_type: ArtifactFileType;\n  file_size: number;    // Bytes\n  file_name: string;    // Original filename\n  competency_ids: string[];  // Links to 1+ competencies\n}\n\n/**\n * Max file size: 50MB\n */\nexport const MAX_ARTIFACT_SIZE = 50 * 1024 * 1024;\n"],"names":[],"mappings":";;;;AAwBO,MAAM,oBAAoB,KAAK,OAAO","debugId":null}},
    {"offset": {"line": 193, "column": 0}, "map": {"version":3,"sources":["file:///Users/joshuamullet/code/lern/types/collections.ts"],"sourcesContent":["/**\n * Central mapping of TypeScript types to Firestore collection names\n *\n * Usage:\n *   collection(db, COLLECTION_NAMES.users)\n *   collection(db, COLLECTION_NAMES.competencies)\n *\n * This ensures consistency and makes it easy to find/update collection names.\n */\nexport const COLLECTION_NAMES = {\n  organizations: 'organizations',\n  users: 'users',\n  competencies: 'competencies',\n  ratings: 'ratings',\n  artifacts: 'artifacts',\n} as const;\n\n/**\n * Type-safe collection name type\n */\nexport type CollectionName = typeof COLLECTION_NAMES[keyof typeof COLLECTION_NAMES];\n"],"names":[],"mappings":"AAAA;;;;;;;;CAQC;;;;AACM,MAAM,mBAAmB;IAC9B,eAAe;IACf,OAAO;IACP,cAAc;IACd,SAAS;IACT,WAAW;AACb","debugId":null}},
    {"offset": {"line": 216, "column": 0}, "map": {"version":3,"sources":["file:///Users/joshuamullet/code/lern/types/index.ts"],"sourcesContent":["/**\n * Central export for all LERN types\n * Import from here: import { User, Competency, ... } from '@/types'\n */\n\nexport * from './base';\nexport * from './role';\nexport * from './organization';\nexport * from './user';\nexport * from './competency';\nexport * from './rating';\nexport * from './artifact';\nexport * from './collections';\n"],"names":[],"mappings":"AAAA;;;CAGC;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA","debugId":null}},
    {"offset": {"line": 240, "column": 0}, "map": {"version":3,"sources":["file:///Users/joshuamullet/code/lern/lib/converters.ts"],"sourcesContent":["/**\n * Firestore data converters for type-safe document reads/writes\n *\n * Usage (client SDK):\n *   const ref = collection(db, COLLECTION_NAMES.users).withConverter(UserConverter);\n *   const users = await getDocs(ref);  // Fully typed!\n *\n * Usage (admin SDK):\n *   const ref = adminDb.collection(COLLECTION_NAMES.users);\n *   const doc = await ref.doc(userId).get();\n *   const user = convertFirestoreDoc<User>(doc);\n */\n\nimport {\n  FirestoreDataConverter,\n  QueryDocumentSnapshot,\n  Timestamp,\n} from 'firebase/firestore';\nimport type {\n  User,\n  Organization,\n  Competency,\n  Rating,\n  Artifact,\n} from '@/types';\n\n/**\n * Helper: Convert Firestore Timestamp to Date\n */\nfunction timestampToDate(timestamp: any): Date {\n  if (timestamp instanceof Date) return timestamp;\n  if (timestamp?.toDate) return timestamp.toDate();\n  return new Date(timestamp);\n}\n\n/**\n * Helper: Convert Date to Firestore Timestamp for writes\n */\nfunction dateToTimestamp(date: Date | Timestamp | undefined): any {\n  if (!date) return undefined;\n  // If already a Timestamp, return as-is\n  if (date instanceof Timestamp) return date;\n  // Convert Date to Timestamp\n  return Timestamp.fromDate(date);\n}\n\n/**\n * Generic converter for any entity type\n * Handles ID stripping on write, timestamp conversion on read\n */\nfunction createConverter<T extends { id: string; created_at: Date }>(\n): FirestoreDataConverter<T> {\n  return {\n    toFirestore: (entity: T) => {\n      const { id, created_at, updated_at, ...data } = entity as any;\n      return {\n        ...data,\n        created_at: dateToTimestamp(created_at) || Timestamp.now(),\n        updated_at: dateToTimestamp(updated_at),\n      };\n    },\n    fromFirestore: (snapshot: QueryDocumentSnapshot) => {\n      const data = snapshot.data();\n      return {\n        id: snapshot.id,\n        ...data,\n        created_at: timestampToDate(data.created_at),\n        updated_at: data.updated_at ? timestampToDate(data.updated_at) : undefined,\n      } as T;\n    },\n  };\n}\n\n/**\n * Converters for each entity type\n */\nexport const OrganizationConverter = createConverter<Organization>();\nexport const UserConverter = createConverter<User>();\nexport const CompetencyConverter = createConverter<Competency>();\nexport const RatingConverter = createConverter<Rating>();\nexport const ArtifactConverter = createConverter<Artifact>();\n\n/**\n * Helper for Admin SDK: Convert a Firestore DocumentSnapshot to typed entity\n * (Admin SDK doesn't support withConverter in the same way)\n */\nexport function convertFirestoreDoc<T extends { id: string; created_at: Date }>(\n  doc: any\n): T | null {\n  if (!doc.exists) return null;\n  const data = doc.data();\n  return {\n    id: doc.id,\n    ...data,\n    created_at: timestampToDate(data.created_at),\n    updated_at: data.updated_at ? timestampToDate(data.updated_at) : undefined,\n  } as T;\n}\n\n/**\n * Helper for Admin SDK: Convert query snapshot to typed array\n */\nexport function convertFirestoreDocs<T extends { id: string; created_at: Date }>(\n  snapshot: any\n): T[] {\n  return snapshot.docs.map((doc: any) => convertFirestoreDoc<T>(doc)).filter(Boolean);\n}\n"],"names":[],"mappings":"AAAA;;;;;;;;;;;CAWC;;;;;;;;;;;;;;;;AAED;AAAA;;AAaA;;CAEC,GACD,SAAS,gBAAgB,SAAc;IACrC,IAAI,qBAAqB,MAAM,OAAO;IACtC,IAAI,WAAW,QAAQ,OAAO,UAAU,MAAM;IAC9C,OAAO,IAAI,KAAK;AAClB;AAEA;;CAEC,GACD,SAAS,gBAAgB,IAAkC;IACzD,IAAI,CAAC,MAAM,OAAO;IAClB,uCAAuC;IACvC,IAAI,gBAAgB,8KAAS,EAAE,OAAO;IACtC,4BAA4B;IAC5B,OAAO,8KAAS,CAAC,QAAQ,CAAC;AAC5B;AAEA;;;CAGC,GACD,SAAS;IAEP,OAAO;QACL,aAAa,CAAC;YACZ,MAAM,EAAE,EAAE,EAAE,UAAU,EAAE,UAAU,EAAE,GAAG,MAAM,GAAG;YAChD,OAAO;gBACL,GAAG,IAAI;gBACP,YAAY,gBAAgB,eAAe,8KAAS,CAAC,GAAG;gBACxD,YAAY,gBAAgB;YAC9B;QACF;QACA,eAAe,CAAC;YACd,MAAM,OAAO,SAAS,IAAI;YAC1B,OAAO;gBACL,IAAI,SAAS,EAAE;gBACf,GAAG,IAAI;gBACP,YAAY,gBAAgB,KAAK,UAAU;gBAC3C,YAAY,KAAK,UAAU,GAAG,gBAAgB,KAAK,UAAU,IAAI;YACnE;QACF;IACF;AACF;AAKO,MAAM,wBAAwB;AAC9B,MAAM,gBAAgB;AACtB,MAAM,sBAAsB;AAC5B,MAAM,kBAAkB;AACxB,MAAM,oBAAoB;AAM1B,SAAS,oBACd,GAAQ;IAER,IAAI,CAAC,IAAI,MAAM,EAAE,OAAO;IACxB,MAAM,OAAO,IAAI,IAAI;IACrB,OAAO;QACL,IAAI,IAAI,EAAE;QACV,GAAG,IAAI;QACP,YAAY,gBAAgB,KAAK,UAAU;QAC3C,YAAY,KAAK,UAAU,GAAG,gBAAgB,KAAK,UAAU,IAAI;IACnE;AACF;AAKO,SAAS,qBACd,QAAa;IAEb,OAAO,SAAS,IAAI,CAAC,GAAG,CAAC,CAAC,MAAa,oBAAuB,MAAM,MAAM,CAAC;AAC7E","debugId":null}},
    {"offset": {"line": 332, "column": 0}, "map": {"version":3,"sources":["file:///Users/joshuamullet/code/lern/components/learner/PortfolioManager.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const PortfolioManager = registerClientReference(\n    function() { throw new Error(\"Attempted to call PortfolioManager() from the server but PortfolioManager is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/learner/PortfolioManager.tsx <module evaluation>\",\n    \"PortfolioManager\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,mBAAmB,IAAA,wQAAuB,EACnD;IAAa,MAAM,IAAI,MAAM;AAAgP,GAC7Q,yEACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 346, "column": 0}, "map": {"version":3,"sources":["file:///Users/joshuamullet/code/lern/components/learner/PortfolioManager.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const PortfolioManager = registerClientReference(\n    function() { throw new Error(\"Attempted to call PortfolioManager() from the server but PortfolioManager is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/learner/PortfolioManager.tsx\",\n    \"PortfolioManager\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,mBAAmB,IAAA,wQAAuB,EACnD;IAAa,MAAM,IAAI,MAAM;AAAgP,GAC7Q,qDACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 360, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 368, "column": 0}, "map": {"version":3,"sources":["file:///Users/joshuamullet/code/lern/app/%28learner%29/learner/portfolio/page.tsx"],"sourcesContent":["import { collection, doc, getDoc, getDocs, query, where } from 'firebase/firestore';\nimport { db } from '@/lib/firebase-client';\nimport { COLLECTION_NAMES, Competency, Rating, Artifact } from '@/types';\nimport { UserConverter, RatingConverter, CompetencyConverter, ArtifactConverter } from '@/lib/converters';\nimport { PortfolioManager } from '@/components/learner/PortfolioManager';\n\nexport const dynamic = 'force-dynamic';\n\n// Hardcoded for POC\nconst LEARNER_ID = 'test-learner-main';\n\n// Helper to group ratings by competency and calculate average\nfunction groupRatingsByCompetency(ratings: Rating[], competencies: Competency[]) {\n  const competencyMap = new Map(competencies.map(c => [c.id, c]));\n  const grouped = new Map<string, { competency: Competency; ratings: Rating[]; average: number }>();\n\n  for (const rating of ratings) {\n    if (rating.status !== 'completed' || rating.score === undefined) continue;\n\n    const competency = competencyMap.get(rating.competency_id);\n    if (!competency) continue;\n\n    if (!grouped.has(rating.competency_id)) {\n      grouped.set(rating.competency_id, {\n        competency,\n        ratings: [],\n        average: 0,\n      });\n    }\n\n    grouped.get(rating.competency_id)!.ratings.push(rating);\n  }\n\n  // Calculate averages\n  for (const [, data] of grouped) {\n    const sum = data.ratings.reduce((acc, r) => acc + (r.score || 0), 0);\n    data.average = sum / data.ratings.length;\n  }\n\n  return Array.from(grouped.values());\n}\n\nexport default async function PortfolioPage() {\n  // Fetch learner\n  const learnerRef = doc(db, COLLECTION_NAMES.users, LEARNER_ID).withConverter(UserConverter);\n  const learnerSnap = await getDoc(learnerRef);\n  const learner = learnerSnap.data();\n\n  if (!learner) {\n    return <div>Learner not found</div>;\n  }\n\n  // Fetch completed ratings for this learner\n  const ratingsRef = collection(db, COLLECTION_NAMES.ratings).withConverter(RatingConverter);\n  const ratingsQuery = query(\n    ratingsRef,\n    where('learner_id', '==', LEARNER_ID),\n    where('status', '==', 'completed')\n  );\n  const ratingsSnap = await getDocs(ratingsQuery);\n  const ratings = ratingsSnap.docs.map((doc) => doc.data());\n\n  // Fetch all competencies\n  const competenciesRef = collection(db, COLLECTION_NAMES.competencies).withConverter(CompetencyConverter);\n  const competenciesSnap = await getDocs(competenciesRef);\n  const competencies = competenciesSnap.docs.map((doc) => doc.data());\n\n  // Fetch artifacts for this learner\n  const artifactsRef = collection(db, COLLECTION_NAMES.artifacts).withConverter(ArtifactConverter);\n  const artifactsQuery = query(artifactsRef, where('learner_id', '==', LEARNER_ID));\n  const artifactsSnap = await getDocs(artifactsQuery);\n  const artifacts = artifactsSnap.docs.map((doc) => doc.data());\n\n  // Group ratings by competency\n  const groupedCompetencies = groupRatingsByCompetency(ratings, competencies);\n\n  return (\n    <PortfolioManager\n      learnerId={LEARNER_ID}\n      learner={learner}\n      competencies={groupedCompetencies}\n      artifacts={artifacts}\n    />\n  );\n}\n"],"names":[],"mappings":";;;;;;;AAAA;AAAA;AACA;AACA;AAAA;AACA;AACA;;;;;;;AAEO,MAAM,UAAU;AAEvB,oBAAoB;AACpB,MAAM,aAAa;AAEnB,8DAA8D;AAC9D,SAAS,yBAAyB,OAAiB,EAAE,YAA0B;IAC7E,MAAM,gBAAgB,IAAI,IAAI,aAAa,GAAG,CAAC,CAAA,IAAK;YAAC,EAAE,EAAE;YAAE;SAAE;IAC7D,MAAM,UAAU,IAAI;IAEpB,KAAK,MAAM,UAAU,QAAS;QAC5B,IAAI,OAAO,MAAM,KAAK,eAAe,OAAO,KAAK,KAAK,WAAW;QAEjE,MAAM,aAAa,cAAc,GAAG,CAAC,OAAO,aAAa;QACzD,IAAI,CAAC,YAAY;QAEjB,IAAI,CAAC,QAAQ,GAAG,CAAC,OAAO,aAAa,GAAG;YACtC,QAAQ,GAAG,CAAC,OAAO,aAAa,EAAE;gBAChC;gBACA,SAAS,EAAE;gBACX,SAAS;YACX;QACF;QAEA,QAAQ,GAAG,CAAC,OAAO,aAAa,EAAG,OAAO,CAAC,IAAI,CAAC;IAClD;IAEA,qBAAqB;IACrB,KAAK,MAAM,GAAG,KAAK,IAAI,QAAS;QAC9B,MAAM,MAAM,KAAK,OAAO,CAAC,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,CAAC,EAAE,KAAK,IAAI,CAAC,GAAG;QAClE,KAAK,OAAO,GAAG,MAAM,KAAK,OAAO,CAAC,MAAM;IAC1C;IAEA,OAAO,MAAM,IAAI,CAAC,QAAQ,MAAM;AAClC;AAEe,eAAe;IAC5B,gBAAgB;IAChB,MAAM,aAAa,IAAA,wKAAG,EAAC,+HAAE,EAAE,wIAAgB,CAAC,KAAK,EAAE,YAAY,aAAa,CAAC,kIAAa;IAC1F,MAAM,cAAc,MAAM,IAAA,2KAAM,EAAC;IACjC,MAAM,UAAU,YAAY,IAAI;IAEhC,IAAI,CAAC,SAAS;QACZ,qBAAO,8OAAC;sBAAI;;;;;;IACd;IAEA,2CAA2C;IAC3C,MAAM,aAAa,IAAA,+KAAU,EAAC,+HAAE,EAAE,wIAAgB,CAAC,OAAO,EAAE,aAAa,CAAC,oIAAe;IACzF,MAAM,eAAe,IAAA,0KAAK,EACxB,YACA,IAAA,0KAAK,EAAC,cAAc,MAAM,aAC1B,IAAA,0KAAK,EAAC,UAAU,MAAM;IAExB,MAAM,cAAc,MAAM,IAAA,4KAAO,EAAC;IAClC,MAAM,UAAU,YAAY,IAAI,CAAC,GAAG,CAAC,CAAC,MAAQ,IAAI,IAAI;IAEtD,yBAAyB;IACzB,MAAM,kBAAkB,IAAA,+KAAU,EAAC,+HAAE,EAAE,wIAAgB,CAAC,YAAY,EAAE,aAAa,CAAC,wIAAmB;IACvG,MAAM,mBAAmB,MAAM,IAAA,4KAAO,EAAC;IACvC,MAAM,eAAe,iBAAiB,IAAI,CAAC,GAAG,CAAC,CAAC,MAAQ,IAAI,IAAI;IAEhE,mCAAmC;IACnC,MAAM,eAAe,IAAA,+KAAU,EAAC,+HAAE,EAAE,wIAAgB,CAAC,SAAS,EAAE,aAAa,CAAC,sIAAiB;IAC/F,MAAM,iBAAiB,IAAA,0KAAK,EAAC,cAAc,IAAA,0KAAK,EAAC,cAAc,MAAM;IACrE,MAAM,gBAAgB,MAAM,IAAA,4KAAO,EAAC;IACpC,MAAM,YAAY,cAAc,IAAI,CAAC,GAAG,CAAC,CAAC,MAAQ,IAAI,IAAI;IAE1D,8BAA8B;IAC9B,MAAM,sBAAsB,yBAAyB,SAAS;IAE9D,qBACE,8OAAC,8JAAgB;QACf,WAAW;QACX,SAAS;QACT,cAAc;QACd,WAAW;;;;;;AAGjB","debugId":null}}]
}